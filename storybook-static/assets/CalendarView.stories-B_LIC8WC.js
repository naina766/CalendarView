import{j as n}from"./jsx-runtime-u17CrQMm.js";import{r as p,R as O}from"./iframe-DECG5Ksn.js";import{t as N,c as V,m as Y,E as K}from"./EventModal-B70NeFF9.js";import"./preload-helper-PPVm8Dsz.js";const U=(e=new Date)=>{const[r,o]=p.useState(e),[s,d]=p.useState("month"),[g,v]=p.useState(null),u=p.useCallback(()=>o(i=>new Date(i.getFullYear(),i.getMonth()+1,1)),[]),t=p.useCallback(()=>o(i=>new Date(i.getFullYear(),i.getMonth()-1,1)),[]),a=p.useCallback(()=>o(new Date),[]);return{currentDate:r,view:s,setView:d,selectedDate:g,setSelectedDate:v,nextMonth:u,previousMonth:t,goToToday:a}};function P(e,r,o){const s=N(e,o?.in);return isNaN(r)?V(e,NaN):(r&&s.setDate(s.getDate()+r),s)}function L(e,r){const o=r?.weekStartsOn,s=N(e,r?.in),d=s.getDay(),g=(d<o?7:0)+d-o;return s.setDate(s.getDate()-g),s.setHours(0,0,0,0),s}function b(e,r,o){const s=N(e,o?.in);return s.setTime(s.getTime()+r*Y),s}function R(e,r){const o=N(e,r?.in);return o.setDate(1),o.setHours(0,0,0,0),o}const W=e=>{const r=R(e),o=L(r,{weekStartsOn:0}),s=[];for(let d=0;d<42;d++)s.push(P(o,d));return s},j=(e,r)=>e.getFullYear()===r.getFullYear()&&e.getMonth()===r.getMonth()&&e.getDate()===r.getDate(),M=O.memo(({date:e,events:r,isToday:o,isOtherMonth:s,onClick:d,onEventClick:g})=>{const v=()=>d(e),u=(t,a)=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),g(a))};return n.jsxs("div",{className:`border border-neutral-200 h-32 p-2 hover:bg-neutral-50 transition-colors cursor-pointer ${s?"text-neutral-400 bg-neutral-50":"text-neutral-900"}`,role:"button",tabIndex:0,"aria-label":`${e.toDateString()}, ${r.length} events`,onClick:v,onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&v()},children:[n.jsx("div",{className:"flex justify-between items-start mb-1",children:n.jsx("span",{className:"text-sm font-medium",children:o?n.jsx("span",{className:"w-6 h-6 bg-primary-500 rounded-full text-white text-xs flex items-center justify-center",children:e.getDate()}):e.getDate()})}),n.jsxs("div",{className:"space-y-1 overflow-hidden",children:[r.slice(0,3).map(t=>n.jsx("div",{className:"text-xs px-2 py-1 rounded truncate text-white",style:{backgroundColor:t.color??"#0ea5e9"},onClick:a=>{a.stopPropagation(),g(t)},role:"button",tabIndex:0,onKeyDown:a=>u(a,t),"aria-label":`${t.title}, ${t.category??""}`,children:t.title},t.id)),r.length>3&&n.jsxs("button",{className:"text-xs text-primary-600 hover:underline",onClick:t=>t.stopPropagation(),children:["+",r.length-3," more"]})]})]})});M.__docgenInfo={description:"",methods:[],displayName:"CalendarCell",props:{date:{required:!0,tsType:{name:"Date"},description:""},events:{required:!0,tsType:{name:"Array",elements:[{name:"CalendarEvent"}],raw:"CalendarEvent[]"},description:""},isToday:{required:!0,tsType:{name:"boolean"},description:""},isOtherMonth:{required:!0,tsType:{name:"boolean"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(date: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"date"}],return:{name:"void"}}},description:""},onEventClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: CalendarEvent) => void",signature:{arguments:[{type:{name:"CalendarEvent"},name:"event"}],return:{name:"void"}}},description:""}}};const q=({date:e,events:r,onDayClick:o,onEventClick:s,focusedDate:d,setFocusedDate:g,onDayKeyboardOpen:v})=>{const u=p.useMemo(()=>W(e),[e]),t=(a,i)=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),v?.(i))};return n.jsxs("div",{className:"select-none",children:[n.jsx("div",{className:"grid grid-cols-7 text-xs text-neutral-500 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(a=>n.jsx("div",{className:"text-center font-medium",children:a},a))}),n.jsx("div",{className:"grid grid-cols-7 gap-px bg-neutral-200",children:u.map(a=>{const i=r.filter(h=>j(h.startDate,a)),E=a.getMonth()!==e.getMonth(),c=j(new Date,a),y=d?j(d,a):!1;return n.jsxs("div",{className:`bg-white border border-neutral-200 ${y?"ring-2 ring-offset-1 ring-primary-300":""}`,children:[n.jsx(M,{date:a,events:i,isToday:c,isOtherMonth:E,onClick:o,onEventClick:s}),n.jsx("div",{tabIndex:0,role:"button","aria-label":`${a.toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})}, ${i.length} events`,onFocus:()=>g?.(a),onKeyDown:h=>t(h,a),className:"sr-only"})]},a.toISOString())})})]})};q.__docgenInfo={description:"",methods:[],displayName:"MonthView",props:{date:{required:!0,tsType:{name:"Date"},description:""},events:{required:!0,tsType:{name:"Array",elements:[{name:"CalendarEvent"}],raw:"CalendarEvent[]"},description:""},onDayClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(date: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"date"}],return:{name:"void"}}},description:""},onEventClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: CalendarEvent) => void",signature:{arguments:[{type:{name:"CalendarEvent"},name:"event"}],return:{name:"void"}}},description:""},focusedDate:{required:!1,tsType:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},description:""},setFocusedDate:{required:!1,tsType:{name:"signature",type:"function",raw:"(date: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"date"}],return:{name:"void"}}},description:""},onDayKeyboardOpen:{required:!1,tsType:{name:"signature",type:"function",raw:"(date: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"date"}],return:{name:"void"}}},description:""}}};const A=({date:e,events:r,onTimeSlotSelect:o,onEventClick:s})=>{const[d,g]=p.useState(null),v=p.useMemo(()=>Array.from({length:7},(t,a)=>{const i=new Date(e);return i.setDate(i.getDate()+a),i}),[e]),u=Array.from({length:24},(t,a)=>a);return n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("div",{className:"grid grid-cols-8 border-b border-neutral-300",children:[n.jsx("div",{className:"p-2 text-sm font-medium text-neutral-500",children:"Time"}),v.map(t=>n.jsx("div",{className:"p-2 text-sm font-medium text-center text-neutral-500",children:t.toLocaleDateString("en-US",{weekday:"short",day:"numeric"})},t.toDateString()))]}),n.jsxs("div",{className:"grid grid-cols-8",children:[n.jsx("div",{className:"flex flex-col border-r border-neutral-300",children:u.map(t=>n.jsxs("div",{className:"h-12 border-b border-neutral-200 text-xs text-neutral-500 flex items-center justify-end pr-1",children:[t.toString().padStart(2,"0"),":00"]},t))}),v.map(t=>n.jsx("div",{className:"border-r border-neutral-200 flex flex-col",children:u.map(a=>{const i=new Date(t);i.setHours(a,0,0,0);const E=r.filter(c=>j(c.startDate,t)&&c.startDate.getHours()===a);return n.jsx("div",{className:`h-12 border-b border-neutral-200 cursor-pointer relative px-1 ${d?.getTime()===i.getTime()?"bg-primary-100":""}`,tabIndex:0,role:"button","aria-label":`Time slot ${i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`,onClick:()=>{g(i),o(i)},onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(g(i),o(i))},children:E.map(c=>n.jsx("div",{className:"absolute top-1 left-1 right-1 px-1 py-0.5 text-xs rounded text-white truncate",style:{backgroundColor:c.color??"#0ea5e9"},onClick:y=>{y.stopPropagation(),s(c)},role:"button",tabIndex:0,children:c.title},c.id))},a)})},t.toDateString()))]})]})};A.__docgenInfo={description:"",methods:[],displayName:"WeekView",props:{date:{required:!0,tsType:{name:"Date"},description:""},events:{required:!0,tsType:{name:"Array",elements:[{name:"CalendarEvent"}],raw:"CalendarEvent[]"},description:""},onTimeSlotSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(time: Date) => void",signature:{arguments:[{type:{name:"Date"},name:"time"}],return:{name:"void"}}},description:""},onEventClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: CalendarEvent) => void",signature:{arguments:[{type:{name:"CalendarEvent"},name:"event"}],return:{name:"void"}}},description:""}}};const F=({events:e,onEventAdd:r,onEventUpdate:o,onEventDelete:s,initialView:d="month",initialDate:g=new Date})=>{const{currentDate:v,view:u,setView:t,nextMonth:a,previousMonth:i,goToToday:E}=U(g),[c,y]=p.useState(null),[h,x]=p.useState(null),[D,S]=p.useState(null);p.useEffect(()=>t(d),[d,t]);const $=l=>{h?(o(h.id,l),x(null)):r(l),y(null)};return p.useEffect(()=>{const l=f=>{if(!D)return;let w=null;if(f.key==="ArrowLeft"&&(w=b(D,-1440)),f.key==="ArrowRight"&&(w=b(D,1440)),f.key==="ArrowUp"&&(w=b(D,-10080)),f.key==="ArrowDown"&&(w=b(D,10080)),w&&(f.preventDefault(),S(w)),f.key==="Enter"){const I=new Date(D.getFullYear(),D.getMonth(),D.getDate(),9,0);y(I),x(null)}};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[D]),n.jsxs("div",{children:[n.jsxs("header",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:i,className:"px-3 py-1 border rounded",children:"Prev"}),n.jsx("button",{onClick:E,className:"px-3 py-1 border rounded",children:"Today"}),n.jsx("button",{onClick:a,className:"px-3 py-1 border rounded",children:"Next"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>t("month"),"aria-pressed":u==="month",className:`px-3 py-1 rounded ${u==="month"?"bg-primary-600 text-white":"border"}`,children:"Month"}),n.jsx("button",{onClick:()=>t("week"),"aria-pressed":u==="week",className:`px-3 py-1 rounded ${u==="week"?"bg-primary-600 text-white":"border"}`,children:"Week"})]})]}),n.jsx("main",{children:u==="month"?n.jsx(q,{date:v,events:e,onDayClick:l=>{y(l),x(null)},onEventClick:l=>{x(l),y(l.startDate)},focusedDate:D,setFocusedDate:S,onDayKeyboardOpen:l=>{y(l),x(null)}}):n.jsx(A,{date:v,events:e,onTimeSlotSelect:l=>{y(l),x(null)},onEventClick:l=>{x(l),y(l.startDate)}})}),n.jsx(K,{open:!!c,initialDate:c??void 0,event:h??void 0,onSave:$,onDelete:l=>s(l),onClose:()=>{y(null),x(null)}})]})};F.__docgenInfo={description:"",methods:[],displayName:"CalendarView",props:{events:{required:!0,tsType:{name:"Array",elements:[{name:"CalendarEvent"}],raw:"CalendarEvent[]"},description:""},onEventAdd:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: CalendarEvent) => void",signature:{arguments:[{type:{name:"CalendarEvent"},name:"event"}],return:{name:"void"}}},description:""},onEventUpdate:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, updates: Partial<CalendarEvent>) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"Partial",elements:[{name:"CalendarEvent"}],raw:"Partial<CalendarEvent>"},name:"updates"}],return:{name:"void"}}},description:""},onEventDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},initialView:{required:!1,tsType:{name:"union",raw:'"month" | "week"',elements:[{name:"literal",value:'"month"'},{name:"literal",value:'"week"'}]},description:"",defaultValue:{value:'"month"',computed:!1}},initialDate:{required:!1,tsType:{name:"Date"},description:"",defaultValue:{value:"new Date()",computed:!1}}}};const Q={title:"Calendar/CalendarView",component:F},m=new Date,H=[{id:"evt-1",title:"Team Standup",description:"Daily sync",startDate:new Date(m.getFullYear(),m.getMonth(),m.getDate(),9,0),endDate:new Date(m.getFullYear(),m.getMonth(),m.getDate(),9,30),color:"#3b82f6",category:"Meeting"},{id:"evt-2",title:"Design Review",startDate:new Date(m.getFullYear(),m.getMonth(),m.getDate(),14,0),endDate:new Date(m.getFullYear(),m.getMonth(),m.getDate(),15,30),color:"#10b981",category:"Design"}],C={args:{events:H,onEventAdd:()=>{},onEventUpdate:()=>{},onEventDelete:()=>{}}},k={args:{events:[],onEventAdd:()=>{},onEventUpdate:()=>{},onEventDelete:()=>{}}},_=[];for(let e=0;e<25;e++){const r=new Date(m.getFullYear(),m.getMonth(),e%28+1,9+e%8,0);_.push({id:`evt-${e+10}`,title:`Event ${e+1}`,startDate:r,endDate:new Date(r.getTime()+1e3*60*60),color:["#3b82f6","#10b981","#f59e0b","#8b5cf6"][e%4]})}const T={args:{events:_,onEventAdd:()=>{},onEventUpdate:()=>{},onEventDelete:()=>{}}};C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:`{
  args: {
    events: sampleEvents,
    onEventAdd: () => {},
    onEventUpdate: () => {},
    onEventDelete: () => {}
  }
}`,...C.parameters?.docs?.source}}};k.parameters={...k.parameters,docs:{...k.parameters?.docs,source:{originalSource:`{
  args: {
    events: [],
    onEventAdd: () => {},
    onEventUpdate: () => {},
    onEventDelete: () => {}
  }
}`,...k.parameters?.docs?.source}}};T.parameters={...T.parameters,docs:{...T.parameters?.docs,source:{originalSource:`{
  args: {
    events: many,
    onEventAdd: () => {},
    onEventUpdate: () => {},
    onEventDelete: () => {}
  }
}`,...T.parameters?.docs?.source}}};const X=["Default","Empty","ManyEvents"];export{C as Default,k as Empty,T as ManyEvents,X as __namedExportsOrder,Q as default};
